<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Par√≥quia</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>

<body>
    <div id="app">
        <!-- Skip Links for Accessibility -->
        <a href="#main-content" class="skip-link">Pular para o conte√∫do principal</a>
        <a href="#navigation" class="skip-link">Pular para a navega√ß√£o</a>

        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="login-header">
                    <h1>Painel Administrativo</h1>
                    <p>Sistema de Gerenciamento da Par√≥quia</p>
                </div>
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <label for="username">Usu√°rio</label>
                        <input type="text" id="username" name="username" required
                            data-help="Digite 'admin' para acessar o sistema" data-help-position="bottom">
                        <span class="error-message" id="username-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" required
                            data-help="Digite a senha configurada para o sistema" data-help-position="bottom">
                        <span class="error-message" id="password-error"></span>
                    </div>
                    <button type="submit" class="btn btn-primary" id="login-btn">
                        <span class="btn-text">Entrar</span>
                        <span class="btn-loading hidden">Entrando...</span>
                    </button>
                    <div class="login-error" id="login-error"></div>
                </form>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="admin-panel" class="screen">
            <header class="admin-header" role="banner">
                <div class="header-content">
                    <div class="header-left">
                        <h1>Painel Administrativo</h1>
                        <div class="system-status">
                            <span id="connection-status" class="status-indicator" title="Status da conex√£o">
                                <span class="status-dot"></span>
                                <span class="status-text">Conectado</span>
                            </span>
                            <span id="github-status" class="status-indicator" title="Status do GitHub">
                                <span class="status-dot"></span>
                                <span class="status-text">GitHub OK</span>
                            </span>
                        </div>
                    </div>
                    <div class="header-actions">
                        <div class="header-info">
                            <span id="last-sync" class="sync-info" title="√öltima sincroniza√ß√£o">
                                √öltima sync: --
                            </span>
                            <span id="user-info" class="user-info">Administrador</span>
                        </div>
                        <button id="system-diagnostics-btn" class="btn btn-icon" title="Diagn√≥sticos do Sistema">
                            <span class="btn-icon">üîç</span>
                        </button>
                        <button id="integration-test-btn" class="btn btn-icon" title="Teste de Integra√ß√£o">
                            <span class="btn-icon">üß™</span>
                        </button>
                        <button id="emergency-reset-btn" class="btn btn-icon btn-danger" title="Reset de Emerg√™ncia">
                            <span class="btn-icon">üö®</span>
                        </button>
                        <button id="logout-btn" class="btn btn-secondary">
                            <span class="btn-icon">üö™</span>
                            Sair
                        </button>
                    </div>
                </div>
            </header>

            <nav class="admin-nav" role="navigation" id="navigation" aria-label="Navega√ß√£o principal">
                <ul class="nav-menu" role="menubar">
                    <li role="none">
                        <a href="#config" class="nav-link active" data-section="config" role="menuitem"
                            aria-current="page">
                            <span class="nav-icon" aria-hidden="true">‚öôÔ∏è</span>
                            <span class="nav-text">Configura√ß√µes</span>
                            <span class="nav-badge" id="config-badge" aria-label="Notifica√ß√µes de configura√ß√£o"></span>
                        </a>
                    </li>
                    <li role="none">
                        <a href="#files" class="nav-link" data-section="files" role="menuitem">
                            <span class="nav-icon" aria-hidden="true">üìÅ</span>
                            <span class="nav-text">Arquivos</span>
                            <span class="nav-badge" id="files-badge" aria-label="Notifica√ß√µes de arquivos"></span>
                        </a>
                    </li>
                    <li role="none">
                        <a href="#data" class="nav-link" data-section="data" role="menuitem">
                            <span class="nav-icon" aria-hidden="true">üìä</span>
                            <span class="nav-text">Gerenciar Dados</span>
                            <span class="nav-badge" id="data-badge" aria-label="Notifica√ß√µes de dados"></span>
                        </a>
                    </li>
                    <li role="none">
                        <a href="#logs" class="nav-link" data-section="logs" role="menuitem">
                            <span class="nav-icon" aria-hidden="true">üìã</span>
                            <span class="nav-text">Logs</span>
                            <span class="nav-badge" id="logs-badge" aria-label="Notifica√ß√µes de logs"></span>
                        </a>
                    </li>
                    <li role="none">
                        <a href="#backup" class="nav-link" data-section="backup" role="menuitem">
                            <span class="nav-icon" aria-hidden="true">üíæ</span>
                            <span class="nav-text">Backup</span>
                            <span class="nav-badge" id="backup-badge" aria-label="Notifica√ß√µes de backup"></span>
                        </a>
                    </li>
                </ul>
                <div class="nav-actions">
                    <button id="refresh-all" class="btn btn-icon" title="Atualizar todos os dados">
                        <span class="btn-icon">üîÑ</span>
                    </button>
                    <button id="toggle-notifications" class="btn btn-icon" title="Alternar notifica√ß√µes">
                        <span class="btn-icon">üîî</span>
                    </button>
                </div>
            </nav>

            <main class="admin-content" role="main" id="main-content">
                <!-- Dashboard Overview (shown when no specific section is active) -->
                <section id="dashboard-section" class="content-section">
                    <div class="dashboard-header">
                        <h2>Painel de Controle</h2>
                        <p class="dashboard-subtitle">Vis√£o geral do sistema administrativo</p>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card" data-section="config">
                            <div class="card-header">
                                <span class="card-icon">‚öôÔ∏è</span>
                                <h3>Configura√ß√µes</h3>
                            </div>
                            <div class="card-content">
                                <p>Gerencie as configura√ß√µes da par√≥quia</p>
                                <div class="card-stats">
                                    <span id="config-status" class="stat-item">Status: OK</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary btn-sm" onclick="adminApp.showSection('config')">
                                    Acessar
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card" data-section="files">
                            <div class="card-header">
                                <span class="card-icon">üìÅ</span>
                                <h3>Arquivos</h3>
                            </div>
                            <div class="card-content">
                                <p>Upload e gerenciamento de arquivos</p>
                                <div class="card-stats">
                                    <span id="files-count" class="stat-item">Arquivos: --</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary btn-sm" onclick="adminApp.showSection('files')">
                                    Acessar
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card" data-section="logs">
                            <div class="card-header">
                                <span class="card-icon">üìã</span>
                                <h3>Logs</h3>
                            </div>
                            <div class="card-content">
                                <p>Visualize logs e hist√≥rico do sistema</p>
                                <div class="card-stats">
                                    <span id="logs-count" class="stat-item">Entradas: --</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary btn-sm" onclick="adminApp.showSection('logs')">
                                    Acessar
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card" data-section="backup">
                            <div class="card-header">
                                <span class="card-icon">üíæ</span>
                                <h3>Backup</h3>
                            </div>
                            <div class="card-content">
                                <p>Backup e restaura√ß√£o de dados</p>
                                <div class="card-stats">
                                    <span id="backup-count" class="stat-item">Backups: --</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary btn-sm" onclick="adminApp.showSection('backup')">
                                    Acessar
                                </button>
                            </div>
                        </div>

                        <div class="dashboard-card" data-section="system-health">
                            <div class="card-header">
                                <span class="card-icon">üîç</span>
                                <h3>Sistema</h3>
                            </div>
                            <div class="card-content">
                                <p>Monitoramento e diagn√≥sticos</p>
                                <div class="card-stats">
                                    <span id="error-rate" class="stat-item">Taxa de erro: --</span>
                                    <span id="system-status" class="stat-item">Status: --</span>
                                </div>
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-primary btn-sm" onclick="adminApp.handleSystemDiagnostics()">
                                    Diagn√≥sticos
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h3>Atividade Recente</h3>
                        <div id="recent-logs" class="activity-list">
                            <!-- Recent activity will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Configuration Section -->
                <section id="config-section" class="content-section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>Configura√ß√µes da Par√≥quia</h2>
                            <p class="section-subtitle">Gerencie as configura√ß√µes do sistema</p>
                        </div>
                        <div class="section-actions">
                            <button id="back-to-dashboard" class="btn btn-secondary btn-sm">
                                ‚Üê Voltar ao Dashboard
                            </button>
                        </div>
                    </div>
                    <!-- GitHub Token Configuration -->
                    <div class="config-card"
                        style="margin-bottom: 2rem; padding: 1.5rem; border: 1px solid #e2e8f0; border-radius: 8px; background: #f8f9fa;">
                        <h3 style="margin: 0 0 1rem 0; color: #2d3748;">üîë Configura√ß√£o GitHub</h3>
                        <p style="margin: 0 0 1rem 0; color: #718096;">Configure seu Personal Access Token para
                            sincroniza√ß√£o com o reposit√≥rio.</p>

                        <div style="display: flex; gap: 1rem; align-items: end; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 300px;">
                                <label for="github-token"
                                    style="display: block; margin-bottom: 0.5rem; font-weight: 600;">GitHub
                                    Token:</label>
                                <input type="password" id="github-token"
                                    placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
                                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-family: monospace;">
                            </div>
                            <button id="save-github-token" class="btn btn-primary" onclick="adminApp.saveGitHubToken()">
                                üíæ Salvar Token
                            </button>
                        </div>

                        <div id="github-status"
                            style="margin-top: 1rem; padding: 0.75rem; border-radius: 6px; display: none;">
                            <!-- Status will be shown here -->
                        </div>

                        <details style="margin-top: 1rem;">
                            <summary style="cursor: pointer; font-weight: 600; color: #4a5568;">Como criar um Personal
                                Access Token?</summary>
                            <div
                                style="margin-top: 0.5rem; padding: 1rem; background: white; border-radius: 6px; font-size: 0.9rem;">
                                <ol style="margin: 0; padding-left: 1.5rem;">
                                    <li>V√° para <strong>GitHub.com ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access
                                            tokens</strong></li>
                                    <li>Clique em <strong>"Generate new token (classic)"</strong></li>
                                    <li>Configure os scopes: <code>repo</code>, <code>workflow</code>,
                                        <code>write:packages</code> (opcional)
                                    </li>
                                    <li>Copie o token e cole no campo acima</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <div id="config-form-container">
                        <!-- Configuration form will be dynamically generated -->
                        <div id="debug-panel" style="margin: 20px; padding: 20px; border: 2px solid #ccc; background: #f9f9f9;">
                            <h4>Debug Panel</h4>
                            <button onclick="window.debugTest()" style="padding: 10px; margin: 5px; background: #007cba; color: white; border: none; border-radius: 4px;">
                                Testar Carregamento de Configura√ß√£o
                            </button>
                            <button onclick="window.debugFileUpload()" style="padding: 10px; margin: 5px; background: #28a745; color: white; border: none; border-radius: 4px;">
                                Testar Upload de Arquivos
                            </button>
                            <button onclick="window.debugAuth()" style="padding: 10px; margin: 5px; background: #17a2b8; color: white; border: none; border-radius: 4px;">
                                Testar Autentica√ß√£o
                            </button>
                            <button onclick="window.forceLogin()" style="padding: 10px; margin: 5px; background: #ffc107; color: black; border: none; border-radius: 4px;">
                                For√ßar Login
                            </button>
                            <button onclick="window.forceLogout()" style="padding: 10px; margin: 5px; background: #dc3545; color: white; border: none; border-radius: 4px;">
                                For√ßar Logout
                            </button>
                            <div id="debug-output" style="margin-top: 10px; padding: 10px; background: white; border: 1px solid #ddd; font-family: monospace; white-space: pre-wrap;"></div>
                        </div>
                    </div>
                </section>

                <!-- Files Section -->
                <section id="files-section" class="content-section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>Gerenciamento de Arquivos</h2>
                            <p class="section-subtitle">Upload e gerenciamento de arquivos do sistema</p>
                        </div>
                        <div class="section-actions">
                            <button id="back-to-dashboard-files" class="btn btn-secondary btn-sm">
                                ‚Üê Voltar ao Dashboard
                            </button>
                        </div>
                    </div>
                    <div id="file-upload-container">
                        <!-- File upload areas will be dynamically generated -->
                    </div>
                </section>

                <!-- Data Management Section -->
                <section id="data-section" class="content-section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>Gerenciamento de Dados</h2>
                            <p class="section-subtitle">Gerencie catequistas, catec√∫menos e dados do Excel</p>
                        </div>
                        <div class="section-actions">
                            <button id="back-to-dashboard-data" class="btn btn-secondary btn-sm">
                                ‚Üê Voltar ao Dashboard
                            </button>
                        </div>
                    </div>
                    <div id="data-manager-container">
                        <!-- Data management interface will be dynamically generated -->
                    </div>
                </section>

                <!-- Logs Section -->
                <section id="logs-section" class="content-section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>Logs do Sistema</h2>
                            <p class="section-subtitle">Visualize o hist√≥rico de opera√ß√µes</p>
                        </div>
                        <div class="section-actions">
                            <button id="back-to-dashboard-logs" class="btn btn-secondary btn-sm">
                                ‚Üê Voltar ao Dashboard
                            </button>
                        </div>
                    </div>
                    <div id="logs-container">
                        <!-- Logs will be dynamically loaded -->
                    </div>
                </section>

                <!-- Backup Section -->
                <section id="backup-section" class="content-section">
                    <div class="section-header">
                        <div class="section-title">
                            <h2>Backup e Restaura√ß√£o</h2>
                            <p class="section-subtitle">Gerencie backups das configura√ß√µes</p>
                        </div>
                        <div class="section-actions">
                            <button id="back-to-dashboard-backup" class="btn btn-secondary btn-sm">
                                ‚Üê Voltar ao Dashboard
                            </button>
                        </div>
                    </div>
                    <div id="backup-container">
                        <!-- Backup interface will be dynamically generated -->
                    </div>
                </section>
            </main>

            <!-- Progress Overlay -->
            <div id="progress-overlay" class="overlay hidden" role="dialog" aria-modal="true"
                aria-labelledby="progress-title">
                <div class="progress-container">
                    <h3 id="progress-title">Processando...</h3>
                    <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"
                        aria-valuenow="0">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <p id="progress-message" aria-live="polite">Iniciando opera√ß√£o...</p>
                    <button id="cancel-operation" class="btn btn-secondary">Cancelar</button>
                </div>
            </div>

            <!-- Notification Container -->
            <div id="notification-container" class="notification-container" role="region" aria-label="Notifica√ß√µes"
                aria-live="polite"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/interfaces/types.js"></script>
    <script src="js/utils/SessionValidator.js"></script>
    <script src="js/utils/LogThrottler.js"></script>
    <script src="js/utils/ResponseHandler.js"></script>
    <script src="js/utils/FileOptimizer.js"></script>
    <script src="js/utils/GitHubOptimizer.js"></script>
    <script src="js/utils/DeploymentVerifier.js"></script>
    <script src="js/utils/SystemRecovery.js"></script>
    <script src="js/utils/ErrorReporter.js"></script>
    <script src="js/managers/DeploymentManager.js"></script>
    <script src="js/managers/TokenManager.js"></script>
    <script src="js/managers/SecurityManager.js"></script>
    <script src="js/managers/AuthManager.js"></script>
    <script src="js/managers/ConfigManager.js"></script>
    <script src="js/managers/FileManager.js"></script>
    <script src="js/managers/GitHubManager.js"></script>
    <script src="js/managers/ProgressTracker.js"></script>
    <script src="js/managers/LogManager.js"></script>
    <script src="js/utils/validation.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/utils/CustomErrors.js"></script>
    <script src="js/utils/ErrorHandler.js"></script>
    <script src="js/utils/NotificationManager.js"></script>
    <script src="js/utils/DialogManager.js"></script>
    <script src="js/utils/ErrorWrapper.js"></script>
    <script src="js/components/ProgressBar.js"></script>
    <script src="js/components/ConfigForm.js"></script>
    <script src="js/components/BackupManager.js"></script>
    <script src="js/components/FileUpload.js"></script>
    <script src="js/components/LogDisplay.js"></script>
    <script src="js/app.js"></script>
</body>

</html>